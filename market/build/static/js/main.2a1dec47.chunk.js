(this["webpackJsonpnext-book"]=this["webpackJsonpnext-book"]||[]).push([[0],{37:function(e,t,r){},38:function(e,t,r){},45:function(e,t,r){},46:function(e,t,r){},48:function(e,t,r){},74:function(e,t,r){},77:function(e,t,r){},78:function(e,t,r){},79:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r(39),s=r.n(n),c=(r(45),r(13)),o=r(14),i=r(16),l=r(15),j=r(4),d=(r(46),r(3)),h=r.n(d),u=r(7),b=r(6),m=(r(48),r(9)),p=r.n(m),O=r(0),x=function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(c.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isLoggedIn:!1,username:null},e.componentDidMount=function(){p.a.get("/api/login",{withCredentials:!0}).then((function(t){console.log(t.data),t.data.cookie?e.setState({isLoggedIn:!0,username:t.data.email_id}):e.setState({isLoggedIn:!1,username:null})})).catch((function(e){return console.log(e)}))},e.handleLogout=Object(u.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("/api/logout",{withCredentials:!0}).then((function(t){console.log(t),e.setState({isLoggedIn:!1,username:null})})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)}))),e}return Object(o.a)(r,[{key:"render",value:function(){return Object(O.jsx)("header",{children:Object(O.jsxs)("nav",{className:"navbar",children:[Object(O.jsxs)("ul",{id:"menu-left",children:[Object(O.jsx)("li",{children:Object(O.jsx)(b.b,{to:"/",children:"Home"})}),Object(O.jsx)("li",{children:Object(O.jsx)(b.b,{to:"/about",children:"About"})}),Object(O.jsx)("li",{children:Object(O.jsx)(b.b,{to:"/nextbook",children:"Next Book"})})]}),Object(O.jsx)("p",{children:"The Book Recommender Website"}),Object(O.jsxs)("ul",{id:"menu-right",children:[Object(O.jsx)("li",{children:Object(O.jsx)(b.b,{to:"/register",children:"Register"})}),this.state.isLoggedIn?Object(O.jsxs)("div",{children:[Object(O.jsx)("li",{children:this.state.username}),Object(O.jsx)("li",{onClick:this.handleLogout,children:Object(O.jsx)(b.b,{children:"Logout"})})]}):Object(O.jsx)("li",{children:Object(O.jsx)(b.b,{to:"/login",children:"Sign In"})})]})]})})}}]),r}(a.Component),f=(r(74),r(21)),g=r(22);var v=function(e){for(var t=e.id,r=e.title,a=e.author,n=e.average_rating.toFixed(),s=[],c=1;c<=n;c++)s.push(Object(O.jsx)(f.a,{icon:g.a,color:"orange"},c));return Object(O.jsx)("div",{className:"book-block",children:Object(O.jsx)(b.b,{to:"/book/".concat(t,"/").concat(r),children:Object(O.jsxs)("div",{children:[Object(O.jsxs)("h3",{children:["Title : ",r]}),Object(O.jsxs)("h4",{children:["Author : ",a]}),Object(O.jsxs)("p",{children:["Stars : ",s]})]})})})},w=(r(37),function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(c.a)(this,r),(a=t.call(this,e)).componentDidMount=Object(u.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/"+a.props.name).then((function(e){var t=e.data,r=e.keys,n=e.arr;r=Object.keys(t),n=[],r.forEach((function(e){n.push(JSON.parse(t[e]))})),a.setState({arr:n,loading:!1})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),a.state={arr:[],loading:!0},a}return Object(o.a)(r,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"book",children:[Object(O.jsx)("h2",{id:"title",children:this.props.title}),Object(O.jsx)("div",{className:"items",children:this.state.loading?Object(O.jsx)("div",{children:"Loading...."}):this.state.arr.map((function(e){return Object(O.jsx)(v,{id:e.bookID,title:e.title,author:e.authors,average_rating:e.average_rating},e.bookID)}))})]})}}]),r}(a.Component));r(77);function N(){return Object(O.jsx)("footer",{children:"Created By Shubham Jain"})}var k=function(){return Object(O.jsxs)("div",{className:"body",children:[Object(O.jsx)(x,{}),Object(O.jsx)(w,{title:"Most Rated Books",name:"MostRated"}),Object(O.jsx)(w,{title:"Best Selling Books",name:"BestSelling"}),Object(O.jsx)(w,{title:"New Arrivals",name:"NewBooks"}),Object(O.jsx)(N,{})]})},_=function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"render",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)(x,{}),Object(O.jsx)("div",{style:{height:"75vh"},children:Object(O.jsx)("h1",{children:"This is about page."})}),Object(O.jsx)(N,{})]})}}]),r}(a.Component),S=_,y=r(23),C=(r(38),function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(c.a)(this,r),(a=t.call(this,e)).handleInputChange=function(e){var t=e.target.value,r=e.target.name;a.setState(Object(y.a)({},r,t))},a.handleErrors=Object(u.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""===a.state.firstName?a.setState({firstName_error:"First name can't be empty"}):a.state.firstName<=4?a.setState({firstName_error:"First name must have atleast 5 letters."}):a.setState({firstName_error:"No error"}),""===a.state.lastName?a.setState({lastName_error:"Last name can't be empty"}):a.state.lastName<=4?a.setState({lastName_error:"Last name must have atleast 5 letters."}):a.setState({lastName_error:"No error"}),""===a.state.email?a.setState({email_error:"Email can't be empty"}):new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(a.state.email)?a.setState({email_error:"No error"}):a.setState({email_error:"Enter a valid email."}),""===a.state.password?a.setState({password_error:"Password can't be empty"}):new RegExp(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$/).test(a.state.password)?a.setState({password_error:"No error"}):a.setState({password_error:"Enter a valid password."});case 4:case"end":return e.stop()}}),e)}))),a.register=Object(u.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.a.post("/api/register",{first_name:a.state.firstName,last_name:a.state.lastName,email_id:a.state.email,password:a.state.password},{withCredentials:!0}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)}))),a.handleSubmit=function(){var e=Object(u.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a.handleErrors();case 3:if("No error"!==a.state.firstName_error||"No error"!==a.state.lastName_error||"No error"!==a.state.email_error||"No error"!==a.state.password_error){e.next=7;break}return console.log("Format ok"),e.next=7,a.register();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={redirect:null,email:"",password:"",firstName:"",lastName:"",email_error:"",password_error:"",lastName_error:"",firstName_error:""},a}return Object(o.a)(r,[{key:"render",value:function(){return this.state.redirect?Object(O.jsx)(j.a,{to:this.state.redirect}):Object(O.jsxs)("div",{children:[Object(O.jsx)(x,{}),Object(O.jsxs)("div",{className:"body-c",children:[Object(O.jsx)("div",{id:"form-container",children:Object(O.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(O.jsx)("h2",{children:"Register"}),Object(O.jsx)("h3",{children:"First Name"}),Object(O.jsx)("input",{name:"firstName",value:this.state.firstName,type:"text",onChange:this.handleInputChange,placeholder:"Enter First name",className:"form-input"}),"No error"!==this.state.firstName_error?Object(O.jsx)("p",{id:"errors",children:this.state.firstName_error}):Object(O.jsx)(O.Fragment,{}),Object(O.jsx)("h3",{children:"Last Name"}),Object(O.jsx)("input",{name:"lastName",value:this.state.lastName,type:"text",onChange:this.handleInputChange,placeholder:"Enter Last name",className:"form-input"}),"No error"!==this.state.lastName_error?Object(O.jsx)("p",{id:"errors",children:this.state.lastName_error}):Object(O.jsx)(O.Fragment,{}),Object(O.jsx)("h3",{children:"Email"}),Object(O.jsx)("input",{name:"email",value:this.state.email,type:"text",onChange:this.handleInputChange,placeholder:"Enter Email",className:"form-input"}),"No error"!==this.state.email_error?Object(O.jsx)("p",{id:"errors",children:this.state.email_error}):Object(O.jsx)(O.Fragment,{}),Object(O.jsx)("h3",{children:"Password"}),Object(O.jsx)("input",{name:"password",value:this.state.password,type:"text",onChange:this.handleInputChange,placeholder:"Enter Password",className:"form-input"}),"No error"!==this.state.password_error?Object(O.jsx)("p",{id:"errors",children:this.state.password_error}):Object(O.jsx)(O.Fragment,{}),Object(O.jsx)("button",{id:"button",type:"submit",onClick:this.handleSubmit,children:"Register"}),Object(O.jsxs)("h4",{children:["Already have an account?"," ",Object(O.jsx)(b.b,{to:"/login",children:"Sign In here"})]})]})}),Object(O.jsx)("div",{id:"side-image"})]}),Object(O.jsx)(N,{})]})}}]),r}(a.Component)),E=function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(c.a)(this,r),(a=t.call(this,e)).handleInputChange=function(e){var t=e.target.value,r=e.target.name;a.setState(Object(y.a)({},r,t))},a.handleErrors=Object(u.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""===a.state.email?a.setState({email_error:"Email can't be empty"}):new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(a.state.email)?(console.log("Email ok"),a.setState({email_error:"No error"})):a.setState({email_error:"Enter a valid email."}),""===a.state.password?a.setState({password_error:"Password can't be empty"}):new RegExp(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$/).test(a.state.password)?(console.log("Password ok"),a.setState({password_error:"No error"})):a.setState({password_error:"Enter a valid password."});case 2:case"end":return e.stop()}}),e)}))),a.loginUser=function(){p.a.post("/api/login",{email_id:a.state.email,password:a.state.password},{withCredentials:!0}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},a.handleSubmit=function(){var e=Object(u.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a.handleErrors();case 3:"No error"===a.state.email_error&&"No error"===a.state.password_error&&console.log("Format is ok");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={redirect:null,email:"",password:"",email_error:"",password_error:""},a}return Object(o.a)(r,[{key:"render",value:function(){return this.state.redirect?Object(O.jsx)(j.a,{to:this.state.redirect}):Object(O.jsxs)("div",{children:[Object(O.jsx)(x,{}),Object(O.jsxs)("div",{className:"body-c",children:[Object(O.jsx)("div",{id:"form-container",children:Object(O.jsxs)("form",{id:"register-form",onSubmit:this.handleSubmit,children:[Object(O.jsx)("h2",{children:"Login"}),Object(O.jsx)("h3",{children:"Email"}),Object(O.jsx)("input",{name:"email",value:this.state.email,type:"text",onChange:this.handleInputChange,placeholder:"Enter Email",className:"form-input"}),"No error"!==this.state.email_error?Object(O.jsx)("p",{id:"errors",children:this.state.email_error}):Object(O.jsx)(O.Fragment,{}),Object(O.jsx)("h3",{children:"Password"}),Object(O.jsx)("input",{name:"password",value:this.state.password,type:"text",onChange:this.handleInputChange,placeholder:"Enter Password",className:"form-input"}),"No error"!==this.state.password_error?Object(O.jsx)("p",{id:"errors",children:this.state.email_error}):Object(O.jsx)(O.Fragment,{}),Object(O.jsx)("button",{id:"button",type:"submit",onClick:this.handleSubmit,children:"Login"}),Object(O.jsxs)("h4",{children:["Doesn't have an account? ",Object(O.jsx)(b.b,{to:"/register",children:"Sign up here"})]})]})}),Object(O.jsx)("div",{id:"side-image"})]}),Object(O.jsx)(N,{})]})}}]),r}(a.Component),I=r(12);r(78);var L=function(e){var t=e.match.params.bookId,r=Object(a.useState)(!0),n=Object(I.a)(r,2),s=n[0],c=n[1],o=Object(a.useState)(t),i=Object(I.a)(o,1)[0],l=Object(a.useState)({}),j=Object(I.a)(l,2),d=j[0],b=j[1],m=Object(a.useState)([]),v=Object(I.a)(m,2),w=v[0],k=v[1];return Object(a.useEffect)((function(){function e(){return e=Object(u.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/detail",{params:{book_id:t}}).then((function(e){for(var t=e.data,r=[],a=1;a<=t.average_rating.toFixed();a++)r.push(Object(O.jsx)(f.a,{icon:g.a,color:"orange"},a));k(r),b(t),c(!1)})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i]),Object(O.jsxs)("div",{children:[Object(O.jsx)(x,{}),s?Object(O.jsx)("div",{children:"Loading...."}):Object(O.jsxs)("div",{className:"book-detail",style:{height:"70vh"},children:[Object(O.jsxs)("h2",{children:["Book Title : ",d.title]}),Object(O.jsxs)("p",{children:["Authors : ",d.authors]}),Object(O.jsxs)("p",{children:["Number of pages : ",d.num_pages]}),Object(O.jsxs)("p",{children:["Publication Date : ",d.publication_date]}),Object(O.jsxs)("p",{children:["Publisher : ",d.publisher]}),Object(O.jsxs)("p",{children:["Ratings : ",w]}),Object(O.jsxs)("p",{children:["Language Code : ",d.language_code]}),Object(O.jsxs)("p",{children:["Total Ratings : ",d.ratings_count]})]}),Object(O.jsx)(N,{})]})},B=function(e){return e.search_data.map((function(e){return Object(O.jsx)(v,{id:e.bookID,title:e.title,author:e.authors,average_rating:e.average_rating},e.bookID)}))},F=function(e){var t=e.expected_data;return Object(O.jsxs)("div",{className:"expected-block",children:[Object(O.jsx)("h2",{children:"Error.....Search From Below Books"}),Object.keys(t).map((function(e){return Object(O.jsxs)("p",{children:[t[e].name,console.log(t)]},t[e].index)}))]})},A=function(){var e=Object(a.useState)(""),t=Object(I.a)(e,2),r=t[0],n=t[1],s=Object(a.useState)([]),c=Object(I.a)(s,2),o=c[0],i=c[1],l=Object(a.useState)(0),j=Object(I.a)(l,2),d=j[0],m=j[1],f=Object(a.useState)(""),g=Object(I.a)(f,2),v=g[0],w=g[1],k=Object(a.useState)(!0),_=Object(I.a)(k,2),S=_[0],y=_[1],C=Object(a.useState)({}),E=Object(I.a)(C,2),L=E[0],A=E[1],R=Object(a.useState)(""),D=Object(I.a)(R,2),P=D[0],z=D[1];function Z(e){return J.apply(this,arguments)}function J(){return J=Object(u.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/nextbook",{params:{book_name:t}}).then((function(e){var t=e.data;if("ok"===t.msg){var r=Object.keys(t.data),a=[];r.forEach((function(e){a.push(JSON.parse(t.data[e]))})),z(t.msg),i(a),w(t.search_book_name),m(t.search_book_id),y(!1)}else"name error"===t.msg?(z(t.msg),A(t.expected),y(!1)):"name null error"===t.msg&&z(t.msg)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}return Object(O.jsxs)("div",{children:[Object(O.jsx)(x,{}),Object(O.jsxs)("div",{className:"search-bar",children:[Object(O.jsx)("p",{children:"Search here :"}),Object(O.jsx)("input",{type:"text",onChange:function(e){e.preventDefault(),n(e.target.value)}}),Object(O.jsx)("button",{onClick:function(){var e=Object(u.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Z(r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onKeyPress:function(e){console.log(e)},children:"Search"})]}),"ok"===P?S?Object(O.jsx)("div",{className:"return",children:"Loading......"}):Object(O.jsxs)("div",{children:[Object(O.jsxs)("h2",{id:"title",children:["Recommended Books for : "," ",Object(O.jsx)(b.b,{to:"/book/".concat(d,"/").concat(v),children:v})]}),Object(O.jsx)("div",{className:"items",children:Object(O.jsx)(B,{search_data:o})})]}):"name error"===P?Object(O.jsx)(F,{expected_data:L}):"name null error"===P?Object(O.jsx)("div",{className:"return",children:"Error: Name cant be empty"}):Object(O.jsx)("div",{className:"return",children:"Search Your Next Book Above"}),Object(O.jsx)(N,{})]})},R=function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"render",value:function(){return Object(O.jsxs)(j.d,{children:[Object(O.jsx)(j.b,{exact:!0,path:"/",component:k}),Object(O.jsx)(j.b,{path:"/about",component:S}),Object(O.jsx)(j.b,{path:"/register",component:C}),Object(O.jsx)(j.b,{path:"/login",component:E}),Object(O.jsx)(j.b,{path:"/book/:bookId/:bookName",component:L}),Object(O.jsx)(j.b,{path:"/nextbook",component:A})]})}}]),r}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(O.jsx)(b.a,{children:Object(O.jsx)(R,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[79,1,2]]]);
//# sourceMappingURL=main.2a1dec47.chunk.js.map