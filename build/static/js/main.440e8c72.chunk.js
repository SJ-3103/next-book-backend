(this["webpackJsonpnext-book"]=this["webpackJsonpnext-book"]||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},74:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(39),c=n.n(r),s=(n(45),n(13)),i=n(14),o=n(16),l=n(15),j=n(3),u=(n(46),n(4)),h=n.n(u),d=n(8),b=n(6),O=(n(48),n(9)),p=n.n(O),m=n(0),x=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isLoggedIn:!1,username:null},e.componentDidMount=function(){p.a.get("/api/login",{withCredentials:!0}).then((function(t){console.log(t.data),t.data.cookie?e.setState({isLoggedIn:!0,username:t.data.email_id}):e.setState({isLoggedIn:!1})})).catch((function(e){return console.log(e)}))},e.handleLogout=Object(d.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("/api/logout",{withCredentials:!0}).then((function(t){console.log(t),e.setState({isLoggedIn:!1})})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)}))),e}return Object(i.a)(n,[{key:"render",value:function(){return Object(m.jsx)("header",{children:Object(m.jsxs)("nav",{className:"navbar",children:[Object(m.jsxs)("ul",{id:"menu-left",children:[Object(m.jsx)("li",{children:Object(m.jsx)(b.b,{to:"/",children:"Home"})}),Object(m.jsx)("li",{children:Object(m.jsx)(b.b,{to:"/about",children:"About Us"})}),Object(m.jsx)("li",{children:Object(m.jsx)(b.b,{to:"/nextbook",children:"Next Book"})})]}),Object(m.jsxs)("ul",{id:"menu-right",children:[Object(m.jsx)("li",{children:Object(m.jsx)(b.b,{to:"/register",children:"Register"})}),this.state.isLoggedIn?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{children:this.state.username}),Object(m.jsx)("li",{onClick:this.handleLogout,children:Object(m.jsx)(b.b,{children:"Logout"})})]}):Object(m.jsx)("li",{children:Object(m.jsx)(b.b,{to:"/login",children:"Sign In"})})]})]})})}}]),n}(a.Component),f=(n(74),n(21)),g=n(22);var v=function(e){for(var t=e.id,n=e.title,a=e.author,r=e.average_rating.toFixed(),c=[],s=1;s<=r;s++)c.push(Object(m.jsx)(f.a,{icon:g.a,color:"orange"},s));return Object(m.jsx)("div",{className:"book-block",children:Object(m.jsx)(b.b,{to:"/book/".concat(t,"/").concat(n),children:Object(m.jsxs)("div",{children:[Object(m.jsxs)("h3",{children:["Title : ",n]}),Object(m.jsxs)("h4",{children:["Author : ",a]}),Object(m.jsxs)("p",{children:["Stars : ",c]})]})})})},k=(n(37),function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).componentDidMount=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/"+a.props.name).then((function(e){var t=e.data,n=e.keys,r=e.arr;n=Object.keys(t),r=[],n.forEach((function(e){r.push(JSON.parse(t[e]))})),a.setState({arr:r,loading:!1})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),a.state={arr:[],loading:!0},a}return Object(i.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"book",children:[Object(m.jsx)("h2",{id:"title",children:this.props.title}),Object(m.jsx)("div",{className:"items",children:this.state.loading?Object(m.jsx)("div",{children:"Loading...."}):this.state.arr.map((function(e){return Object(m.jsx)(v,{id:e.bookID,title:e.title,author:e.authors,average_rating:e.average_rating},e.bookID)}))})]})}}]),n}(a.Component));n(77);function w(){return Object(m.jsx)("footer",{children:"Created By Shubham Jain"})}var N=function(){return Object(m.jsxs)("div",{className:"body",children:[Object(m.jsx)(x,{}),Object(m.jsx)(k,{title:"Most Rated Books",name:"MostRated"}),Object(m.jsx)(k,{title:"Best Selling Books",name:"BestSelling"}),Object(m.jsx)(k,{title:"New Arrivals",name:"NewBooks"}),Object(m.jsx)(w,{})]})},S=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(x,{}),Object(m.jsx)("h1",{children:"Hello From /about"})]})}}]),n}(a.Component),y=S,C=n(23),I=(n(38),function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleInputChange=function(e){var t=e.target.value,n=e.target.name;a.setState(Object(C.a)({},n,t))},a.handleErrors=function(e){console.log(e)},a.handleSubmit=function(){var e=Object(d.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),p.a.post("/api/register",{first_name:a.state.firstName,last_name:a.state.lastName,email_id:a.state.emailId,password:a.state.password},{withCredentials:!0}).then((function(e){console.log(e),a.setState({redirect:"/"})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={redirect:null,emailId:"",password:"",firstName:"",lastName:"",errors:{email:"",password:"",lastName:"",firstName:""}},a}return Object(i.a)(n,[{key:"render",value:function(){return this.state.redirect?(console.log(this.state.redirect),Object(m.jsx)(j.a,{to:this.state.redirect})):Object(m.jsxs)("div",{className:"body-c",children:[Object(m.jsx)(x,{}),Object(m.jsxs)("div",{id:"form-container",children:[Object(m.jsx)("h3",{children:"Register"}),Object(m.jsxs)("form",{id:"register-form",onSubmit:this.handleSubmit,children:[Object(m.jsx)("input",{name:"firstName",value:this.state.firstName,type:"text",onChange:this.handleInputChange,placeholder:"Enter First name",className:"form-input"}),Object(m.jsx)("p",{id:"errors",children:this.state.errors.firstName}),Object(m.jsx)("input",{name:"lastName",value:this.state.lastName,type:"text",onChange:this.handleInputChange,placeholder:"Enter Last name",className:"form-input"}),Object(m.jsx)("p",{id:"errors",children:this.state.errors.lastName}),Object(m.jsx)("input",{name:"emailId",value:this.state.emailId,type:"text",onChange:this.handleInputChange,placeholder:"Enter Email",className:"form-input"}),Object(m.jsx)("p",{id:"errors",children:this.state.errors.email}),Object(m.jsx)("input",{name:"password",value:this.state.password,type:"text",onChange:this.handleInputChange,placeholder:"Enter Password",className:"form-input"}),Object(m.jsx)("p",{id:"errors",children:this.state.errors.password}),Object(m.jsx)("button",{id:"button",type:"submit",onClick:this.handleSubmit,children:"Register"})]}),Object(m.jsxs)("h4",{children:["Already have an account?",Object(m.jsx)(b.b,{to:"/login",children:"Sign In here"})]})]})]})}}]),n}(a.Component)),_=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleInputChange=function(e){var t=e.target.value,n=e.target.name;a.setState(Object(C.a)({},n,t))},a.handleErrors=function(e){console.log(e)},a.handleSubmit=function(){var e=Object(d.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),p.a.post("/api/login",{email_id:a.state.email,password:a.state.password},{withCredentials:!0}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={redirect:null,email:"",password:"",errors:{email:"",password:""}},a}return Object(i.a)(n,[{key:"render",value:function(){return this.state.redirect?Object(m.jsx)(j.a,{to:this.state.redirect}):Object(m.jsxs)("div",{className:"body-c",children:[Object(m.jsx)(x,{}),Object(m.jsxs)("div",{id:"form-container",children:[Object(m.jsx)("h3",{children:"Login"}),Object(m.jsxs)("form",{id:"register-form",onSubmit:this.handleSubmit,children:[Object(m.jsx)("input",{name:"email",value:this.state.email,type:"text",onChange:this.handleInputChange,placeholder:"Enter Email",className:"form-input"}),Object(m.jsx)("p",{id:"errors",children:this.state.errors.email}),Object(m.jsx)("input",{name:"password",value:this.state.password,type:"text",onChange:this.handleInputChange,placeholder:"Enter Password",className:"form-input"}),Object(m.jsx)("p",{id:"errors",children:this.state.errors.password}),Object(m.jsx)("button",{id:"button",type:"submit",onClick:this.handleSubmit,children:"Login"})]}),Object(m.jsxs)("h4",{children:["Doesn't have an account? ",Object(m.jsx)(b.b,{to:"/register",children:"Sign up here"})]})]})]})}}]),n}(a.Component),E=n(12);n(78);var L=function(e){var t=e.match.params.bookId,n=Object(a.useState)(!0),r=Object(E.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(t),o=Object(E.a)(i,1)[0],l=Object(a.useState)({}),j=Object(E.a)(l,2),u=j[0],b=j[1],O=Object(a.useState)([]),v=Object(E.a)(O,2),k=v[0],w=v[1];return Object(a.useEffect)(Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/detail",{params:{book_id:t}}).then((function(e){for(var t=e.data,n=[],a=1;a<=t.average_rating.toFixed();a++)n.push(Object(m.jsx)(f.a,{icon:g.a,color:"orange"},a));w(n),b(t),s(!1)})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)}))),[o]),Object(m.jsxs)("div",{children:[Object(m.jsx)(x,{}),c?Object(m.jsx)("div",{children:"Loading...."}):Object(m.jsxs)("div",{className:"book-detail",children:[Object(m.jsxs)("h2",{children:["Title : ",u.title]}),Object(m.jsxs)("p",{children:["Authors : ",u.authors]}),Object(m.jsxs)("p",{children:["Number of pages : ",u.num_pages]}),Object(m.jsxs)("p",{children:["Publication Date : ",u.publication_date]}),Object(m.jsxs)("p",{children:["Publisher : ",u.publisher]}),Object(m.jsxs)("p",{children:["Ratings : ",k]}),Object(m.jsxs)("p",{children:["Language Code : ",u.language_code]}),Object(m.jsxs)("p",{children:["Total Ratings : ",u.ratings_count]})]})]})},B=function(e){return e.search_data.map((function(e){return Object(m.jsx)(v,{id:e.bookID,title:e.title,author:e.authors,average_rating:e.average_rating},e.bookID)}))},D=function(e){var t=e.expected_data;return Object(m.jsxs)("div",{className:"expected-block",children:[Object(m.jsx)("h2",{children:"Error.....Search From Below Books"}),Object.keys(t).map((function(e){return Object(m.jsxs)("h4",{children:[t[e].name,console.log(t[e].name)]},t[e].index)}))]})},R=function(){var e=Object(a.useState)(""),t=Object(E.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),s=Object(E.a)(c,2),i=s[0],o=s[1],l=Object(a.useState)(0),j=Object(E.a)(l,2),u=j[0],O=j[1],f=Object(a.useState)(""),g=Object(E.a)(f,2),v=g[0],k=g[1],N=Object(a.useState)(!0),S=Object(E.a)(N,2),y=S[0],C=S[1],I=Object(a.useState)({}),_=Object(E.a)(I,2),L=_[0],R=_[1],A=Object(a.useState)(""),F=Object(E.a)(A,2),J=F[0],M=F[1];function P(e){return T.apply(this,arguments)}function T(){return T=Object(d.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/nextbook",{params:{book_name:t}}).then((function(e){var t=e.data;if("ok"===t.msg){var n=Object.keys(t.data),a=[];n.forEach((function(e){a.push(JSON.parse(t.data[e]))})),M(t.msg),o(a),k(t.search_book_name),O(t.search_book_id),C(!1)}else"name error"===t.msg?(M(t.msg),R(t.expected),C(!1)):"name null error"===t.msg&&M(t.msg)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}return Object(m.jsxs)("div",{className:"book",children:[Object(m.jsx)(x,{}),Object(m.jsxs)("div",{className:"search-bar",children:["Search here :",Object(m.jsx)("input",{type:"text",onChange:function(e){e.preventDefault(),r(e.target.value)}}),Object(m.jsx)("button",{onClick:function(){var e=Object(d.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,P(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Enter"})]}),"ok"===J?y?Object(m.jsx)("div",{children:"Loading......"}):Object(m.jsxs)("div",{children:[Object(m.jsxs)("h2",{id:"title",children:["Recommended Books for"," ",Object(m.jsx)(b.b,{to:"/book/".concat(u,"/").concat(v),children:v})]}),Object(m.jsx)("div",{className:"items",children:Object(m.jsx)(B,{search_data:i})})]}):"name error"===J?Object(m.jsx)(D,{expected_data:L}):"name null error"===J?Object(m.jsx)("div",{children:"Name cant be empty"}):Object(m.jsx)("div",{children:"Search Your Next Book Above"}),Object(m.jsx)(w,{})]})},A=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(m.jsxs)(j.d,{children:[Object(m.jsx)(j.b,{exact:!0,path:"/",component:N}),Object(m.jsx)(j.b,{path:"/about",component:y}),Object(m.jsx)(j.b,{path:"/register",component:I}),Object(m.jsx)(j.b,{path:"/login",component:_}),Object(m.jsx)(j.b,{path:"/book/:bookId/:bookName",component:L}),Object(m.jsx)(j.b,{path:"/nextbook",component:R})]})}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(m.jsx)(b.a,{children:Object(m.jsx)(A,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[79,1,2]]]);
//# sourceMappingURL=main.440e8c72.chunk.js.map